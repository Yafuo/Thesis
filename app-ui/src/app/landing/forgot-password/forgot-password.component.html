<div class="wrap-content">
  <ngx-spinner></ngx-spinner>
  <mat-sidenav-container class="example-container" (backdropClick)="sidenav.close()">
    <mat-sidenav #sidenav>
      <fa-icon (click)="sidenav.close()" [icon]="faArrowLeft" size="2x" [styles]="{'color': 'black'}"></fa-icon>
      <mat-nav-list>
        <p (click)="navTo(i)" *ngFor="let l of list; index as i">{{l}}</p>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
      <fa-icon (click)="sidenav.open()" [icon]="faBars" size="2x" [styles]="{'color': 'black'}"></fa-icon>
      <div class="login-page container-fluid">
        <div class="wrap-symbol">
          <fa-icon [icon]="faGithub" size="10x"></fa-icon>
          <h3>Reset your password</h3>
        </div>
        <div class="login-form m-0 ml-auto mr-auto">
          <div class="form-group mb-4" [hidden]="isKnownEmail">
            <label class="mb-0">Email:</label>
            <input type="email" class="form-control form-control-sm" required
                   placeholder="Enter email" [(ngModel)]="mail" #email="ngModel"
                   pattern="^[a-zA-Z0-9]+\@[^\@\.]+\.[^\@\.]+">
            <div *ngIf="email.invalid && (email.dirty || email.touched)" class="form-control-sm alert-danger">
              <div *ngIf="email.errors.required">
                Email is required.
              </div>
              <div *ngIf="email.errors.pattern">
                Email must have <@>, <.>.
              </div>
            </div>
          </div>
          <div class="form-group mb-4" [hidden]="!isKnownEmail">
            <label class="mb-0">Password:</label>
            <input type="password" class="form-control form-control-sm" required minlength="8" #pass="ngModel"
                   placeholder="Enter password" [(ngModel)]="password">
            <div *ngIf="pass.invalid && (pass.dirty || pass.touched)" class="form-control-sm alert-danger">
              <div *ngIf="pass.errors.required">
                Password is required.
              </div>
              <div *ngIf="pass.errors.minlength">
                Password must have at least 8 character.
              </div>
            </div>
          </div>
          <div class="form-group mb-0">
            <button [disabled]="email.errors && pass.errors" (click)="isKnownEmail ? sendPass() : sendMail()"
                    id="login" class="btn btn-primary form-control form-control-sm">{{isKnownEmail? 'Reset Password': 'Send mail'}}</button>
          </div>
          <div class="form-group text-center" [hidden]="!isChanged && !isSent">
            <fa-icon [icon]="faCheckCircle" [styles]="{'color': 'green'}"></fa-icon>
            <i style="color: green">{{(isSent && !isChanged)? 'Email send successfully': 'Password update successfully'}}</i>
          </div>
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

